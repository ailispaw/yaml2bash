#!/usr/bin/env bash
set -e

FILE=$1

if [ -z "${FILE}" ]; then
  echo "Usage $(basename $0) <file-name>" >&2
  exit 1
fi

../src/yaml2bash "${FILE}"

eval $(../src/yaml2bash "${FILE}")

echo "--------------------------------------------------------------------------------"
echo "Traversing"
echo "--------------------------------------------------------------------------------"

y2b_traverse Y2B

echo "--------------------------------------------------------------------------------"
echo "Counting"
echo "--------------------------------------------------------------------------------"

echo "y2b_count(Y2B)=$(y2b_count Y2B)"

echo "--------------------------------------------------------------------------------"
echo "Getting Keys"
echo "--------------------------------------------------------------------------------"

echo "y2b_keys(Y2B)=$(y2b_keys Y2B)"

echo "--------------------------------------------------------------------------------"
echo "Convert to Json"
echo "--------------------------------------------------------------------------------"

echo "y2b_json(Y2B)=$(y2b_json Y2B)"
